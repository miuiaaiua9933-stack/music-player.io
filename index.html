<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Music Player</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="player-container">
        <div class="top-area">
            <div class="album-art-container" onclick="togglePlay()">
                <div class="vinyl-record" id="vinyl">
                    <!-- スピンドルホールを追加 -->
                    <div class="spindle-hole" aria-hidden="true"></div>
                
                    <img class="album-art" id="albumArt" src="assets/images/summer.svg" alt="Album Art">
                </div>

                <div id="lyricsOverlay" class="lyrics-overlay" aria-hidden="true">
                    <div id="lyricsOverlayPanel" class="lyrics-panel-overlay">- 歌詞はここに表示されます -</div>
                </div>
            </div>

            <div style="flex:1; min-width:0;">
                <div class="song-info">
                    <div class="title-area">
                        <div style="min-width:0;">
                            <div class="song-title" id="songTitle">Summer Breeze</div>
                            <div class="song-artist" id="songArtist">Demo Artist</div>
                        </div>
                    </div>

                    <button id="lyricsToggle" class="lyrics-toggle" aria-pressed="false" aria-controls="lyricsOverlay" title="歌詞を表示/非表示" onclick="toggleLyrics()">歌詞</button>
                </div>

                <div class="progress-container">
                    <div class="progress-bar" onclick="seek(event)">
                        <div class="progress" id="progress"></div>
                    </div>
                    <div class="time-info">
                        <span id="currentTime">0:00</span>
                        <span id="duration">3:45</span>
                    </div>
                </div>

                <!-- Controls row: shuffle (left), center controls (prev/play/next), repeat (right) -->
                <div class="controls">
                    <!-- left: shuffle -->
                    <button id="shuffleBtn" class="control-btn shuffle-btn" aria-pressed="false" title="シャッフル" onclick="toggleShuffle()" aria-label="シャッフル">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2">
                            <path d="M16 3h5v5"></path><path d="M21 3L13 11"></path>
                            <path d="M4 21h5l7-9"></path>
                            <path d="M4 3l7 9"></path>
                        </svg>
                    </button>

                    <!-- center group: previous / play-pause / next -->
                    <div class="controls-center">
                        <button class="control-btn" onclick="previousSong()" aria-label="前の曲">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2">
                                <path d="M19 20L9 12l10-8v16z"/>
                                <path d="M5 19V5"/>
                            </svg>
                        </button>

                        <button class="control-btn play-pause-btn" onclick="togglePlay()" aria-label="再生/一時停止">
                            <svg id="playIcon" width="30" height="30" viewBox="0 0 24 24" fill="white"><path d="M8 5v14l11-7z"/></svg>
                            <svg id="pauseIcon" width="30" height="30" viewBox="0 0 24 24" fill="white" style="display:none"><path d="M6 4h4v16H6zM14 4h4v16h-4z"/></svg>
                        </button>

                        <button class="control-btn" onclick="nextSong()" aria-label="次の曲">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2">
                                <path d="M5 4l10 8-10 8V4z"/>
                                <path d="M19 5v14"/>
                            </svg>
                        </button>
                    </div>

                    <!-- right: repeat (moved to far right for balance) -->
                    <button id="repeatBtn" class="control-btn repeat-btn" aria-pressed="false" title="一曲リピート" onclick="toggleRepeat()" aria-label="一曲リピート">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2">
                            <path d="M17 1l4 4-4 4" /><path d="M21 5H9a4 4 0 0 0-4 4v1" />
                            <path d="M7 23l-4-4 4-4" /><path d="M3 19h12a4 4 0 0 0 4-4v-1" />
                        </svg>
                        <!-- small '1' to indicate one-track repeat (visually kept via CSS pseudo if desired) -->
                    </button>
                </div>

                <div class="stack-area">
                    <div class="volume-container">
                        <svg class="volume-icon" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg>

                        <div class="volume-slider" onclick="changeVolume(event)" role="slider" aria-label="音量" aria-valuemin="0" aria-valuemax="100" aria-valuenow="70">
                            <div class="volume-level" id="volumeLevel"></div>
                        </div>
                    </div>

                    <div class="playlist" id="playlist"></div>
                </div>
            </div>
        </div>
    </div>

    <audio id="audioPlayer"></audio>

    <script src="script.js" defer></script>
</body>
</html>
